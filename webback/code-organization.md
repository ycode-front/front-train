# 前端代码组织

从目前情况来看，后台开发在书写js代码的时候没有一个统一的风格导致代码组织比较混乱，可读性较差，所以这次培训的目的就是统一前端代码的风格。

理清前端代码组织的思路，从文件的组织到代码的组织。并确定代码组织的规范，掌握使用统一的方式书写 js 代码，达到代码易读的效果。

## 前言

我们先来理一下前后端分工关系吧。

首先前后端工程分离是基础。

关于前后端分离。觉得前后端分离就是后台不写前端代码。这里其实是两个概念，一个是前后端工程的分离，另一个是前后端分工的分离。

**前后端工程分离** 是指前端和后端分别放在两个工程中，并且前后端的交互都通过接口来进行。在前端工程中完成前端逻辑，在后端工程中提供接口和服务。工程的分离带来的好处如下

- 便于测试
- 并行开发
- 便于分工合作

**前后端分工分离** 前后端分工的分离并不是绝对的，这个取决于公司的人员配置。比如如果某个公司的后端开发人员比较多，或者技术比较好，而前端缺少人手，就没有必要进行前后端分工的完全分离，后端开发可以维护和编写前端页面。

首先，前后端工程上的分工是必然的趋势，而前后端分工的分离则是根据实际情况来决定。所以下面讨论的内容基于 **前后端工程分离** ，而分工不完全分离。

## 文件的组织

- 组件层
- 业务逻辑层

组件层由前端编写，业务逻辑层由后台开发编写。

组件层对后端开发来说就像一个第三方库，只要负责使用即可，如果有任何无法满足业务需求的地方，再提出来由前端人员负责组件升级。

业务逻辑层写在对应的html文件中，这是由于，业务逻辑和页面是一一对应的，所以没有必要写在单独的js文件中，那样反而会带来更多的管理成本。

但是这又会出现另外一个问题，比如两个页面有部分复杂的业务逻辑可以需要复用，这个时候如果将一个复杂的逻辑分散到到两个html 中会带来维护困难的问题，所以我们在组织中再加一层

- 基础组件层
- 业务组件层
- 页面逻辑层

将复杂的并且需要复用的逻辑写在业务组件层。业务组件层由后台进行编写和维护。

### 文件组织举例

- js
    - base-lib
        - xxx.js
    - business-lib
        - xxx.js
- css
- pages
    - index.html

## 代码的组织

所以 **页面逻辑层** 是由后台开发维护的，所以这里专门来讲一下 **页面逻辑层** 内部代码的如何组织

我们采用 **单例模式**

先上例子

```javascript

var main = {
    data:{

    },
    init:function(options){
        var self = this;
        $.extend(self, options);

        self.initEvent();
        self.initPlug();
    },
    // 在这里注册事件
    initEvent: function(){

    },
    // 初始化组件
    initPlug: function(){

    }
}

main.init({});

```

为什么要这样写呢？

- 可以清晰的看出执行的顺序 [反例](http://wy.ycode.cn/paymentAnalyse/loadProperty)
- 将变量和逻辑分离开来
- 模块化，更快的定位某个功能对应的代码，更加容易维护
- 通过选项控制变量，从而便于自测调试
- 哈哈 更符合java思想
